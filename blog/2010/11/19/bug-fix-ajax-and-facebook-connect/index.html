
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Bug Fix: Ajax and Facebook Connect - smooth walls of her own ideas</title>
  <meta name="author" content="Becky Russoniello">

  
  <meta name="description" content="Ajax not working with Facebook Connect? Facebook Connect not working (on a page with Ajax)? Two bugs, one fix. Let me &#8216;splain it to you. See, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://beckyrussoniello.github.com/blog/2010/11/19/bug-fix-ajax-and-facebook-connect/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="smooth walls of her own ideas" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <div id="main">
  <header role="banner"><hgroup>
  <h1><a href="/">smooth walls of her own ideas</a></h1>
  
    <h4>a ruby blog by Becky Russoniello</h4>
  
<hr />
</hgroup>

</header>
  <!-- nav role="navigation">{ % include navigation.html % }</nav -->
    <!-- div id="content" -->
      <!-- div -->
<article class="hentry" role="article">
  
    
      <span class="title">Bug Fix: Ajax and Facebook Connect</span>
    
    
      <span class="meta">&emsp;
        








  


<time datetime="2010-11-19T02:56:00-05:00" pubdate data-updated="true">Nov 19<span>th</span>, 2010</time>
        
      </p>
    


<div class="entry-content"><p>Ajax not working with Facebook Connect?  Facebook Connect not working (on a page with Ajax)?  Two bugs, one fix.  Let me &#8216;splain it to you.<!-- more --></p>

<p>See, Facebook&#8217;s javascript is special.  It wants to be the only javascript on the page.  Well, it wants to be the only type=&#8221;text/javascript&#8221; on the page.</p>

<p>You would probably never think of this because you&#8217;re probably including your javascripts via helper methods, which doesn&#8217;t involve typing type=&#8221;text/javascript&#8221; at all.</p>

<p>&lt;%= javascript_include_tag &#8216;prototype&#8217; %>
&lt;%= fb_connect_async_js %>
(The second one is a Facebooker2 helper method)</p>

<p>However, if you look at the source code for each of these helpers, you will notice that type=&#8221;text/javascript&#8221; is being written both by the Facebook javascript and by the Prototype helper (actually, in the case of Facebook, the source code links to additional javascript).  This means that only one or the other of FB Connect and Ajax can work, depending on which script is loaded first.</p>

<p>Anyway, in order to get everything working, you need to load Facebook&#8217;s javascript first, and get rid of the &#8216;type&#8217; attribute for Prototype. Do this:</p>

<p>&lt;%= fb_connect_async_js %>
&lt;%= javascript_include_tag &#8216;prototype&#8217;, :type => nil %></p>

<p>Now you can Ajax out your Facebook app.  Enjoy!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Becky Russoniello</span></span>

      








  


<time datetime="2010-11-19T02:56:00-05:00" pubdate data-updated="true">Nov 19<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/ajax/'>ajax</a>, <a class='category' href='/blog/categories/bug-fix/'>bug fix</a>, <a class='category' href='/blog/categories/facebook/'>facebook</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/11/14/client-question-how-to-share-content-with-a-facebook-business-page/" title="Previous Post: Client Question: "sharing" content with a Facebook business page">&laquo; Client Question: "sharing" content with a Facebook business page</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/06/14/human-brain-equals-interpreter/" title="Next Post: Human brain != interpreter">Human brain != interpreter &raquo;</a>
      
    </p>
  </footer>
</article>

<!-- /div -->


  <!-- { % if site.post_asides.size % }
    { % include_array post_asides % }
  { % else % }
    { % include_array default_asides % }
  { % endif % } -->
  


    <!-- /div -->
  </div>

<aside id="sidebar">
<div id="toppy">
<h3>Becky Russoniello</h3>
<hr/>
<p id="title">Ruby on Rails developer</p>
<img id="profile-pic" src="http://graph.facebook.com/6831286/picture?type=square" />
</div>
<h4>My Projects</h4>
<ul>
<li><a href="">Spambot Freud</a></li>
<li><a href="">Multi-City Job Search</a></li>
<li><a href="">Facebook Status Archive</a></li>
<li><a href="">Gists</a></li>
</ul>

<h4>Tags</h4>
<ul>
<li><a href="">ruby</a></li>
<li><a href="">bug fix</a></li>
<li><a href="">programming languages</a></li>
<li><a href="">reframing the issue</a></li>
<li><a href="">rails</a></li>
<li><a href="">gems</a></li>
<li><a href="">ux</a></li>
<li><a href="">View All Tags</a></li>
</ul>

<h4>Social</h4>
<ul>
<li><a href="">Facebook</a></li>
<li><a href="">Twitter</a></li>
<li><a href="">Github</a></li>
</ul>
</aside>
  <!-- footer role="contentinfo">{ % include footer.html % }</footer>
  { % include after_footer.html % } -->
</body>
</html>
